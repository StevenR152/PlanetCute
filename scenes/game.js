var world = [
	[
		[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
		[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
		[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
		[ 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
		[ 0, 0, 0, 0, 0, 3, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0 ],
		[ 0, 0, 0, 0, 0, 3, 3, 3, 22, 0, 0, 0, 0, 0, 0, 0 ],
		[ 0, 0, 0, 0, 3, 3, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0 ],
		[ 0, 0, 0, 0, 0, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
		[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
		[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
		[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
	],
	[
		[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
		[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
		[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
		[ 0, 0, 0, 0, 0, 0, 0, 3, 3, 0, 0, 0, 0, 0, 0, 0 ],
		[ 0, 0, 0, 0, 0, 3, 3, 3, 3, 3, 3, 3, 3, 0, 0, 0 ],
		[ 0, 0, 0, 0, 3, 3, 3, 3, 3, 3, 3, 3, 3, 0, 0, 0 ],
		[ 0, 0, 0, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 0, 0, 0 ],
		[ 0, 0, 0, 3, 3, 3, 3, 3, 3, 3, 0, 23, 3, 0, 0, 0 ],
		[ 0, 0, 0, 0, 3, 3, 3, 3, 3, 0, 0, 0, 0, 0, 0, 0 ],
		[ 0, 0, 0, 0, 0, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
		[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
		[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
		[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
	],
	[
		[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
		[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0 ],
		[ 0, 0, 0, 0, 0, 0, 2, 2, 0, 0, 0, 2, 1, 2, 0, 0 ],
		[ 0, 0, 0, 0, 0, 2, 2, 2, 2, 2, 0, 2, 1, 2, 0, 0 ],
		[ 2, 0, 2, 2, 2, 1, 1, 1, 1, 1, 2, 1, 1, 2, 2, 0 ],
		[ 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 2 ],
		[ 2, 0, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 0 ],
		[ 0, 0, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 0 ],
		[ 0, 0, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 0 ],
		[ 0, 0, 2, 2, 1, 1, 1, 1, 1, 1, 0, 0, 2, 1, 2, 0 ],
		[ 0, 0, 0, 2, 2, 1, 1, 2, 2, 0, 0, 0, 2, 2, 0, 0 ],
		[ 0, 0, 0, 0, 0, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
		[ 0, 0, 0, 0, 0, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
	]
]

var tileIdToImage = {
	0 : {
		image : "waterblock",
		walkable : false
	},
	1 : {
		image : "grassblock",
		walkable : false
	},
	2 : {
		image : "sandblock",
		walkable : false
	},
	3 : {
		image : "stoneblock",
		walkable : false
	},
	21 : {
		image : "rampnorth",
		walkable : false
	},
	22 : {
		image : "rampeast",
		walkable : false
	},
	23 : {
		image : "rampsouth",
		walkable : false
	},
	24 : {
		image : "rampnorth",
		walkable : false
	},
}

Crafty.defineScene("Game", function() {
	Crafty.viewport.scale(0.5);
	for(var layerIndex = world.length -1; layerIndex >= 0; layerIndex--){
		for(var rowIndex = 0; rowIndex < world[layerIndex].length; rowIndex++) {
			for(var colIndex = 0; colIndex < world[layerIndex][rowIndex].length; colIndex++) {
				var tileId = world[layerIndex][rowIndex][colIndex];
				var tileType = tileIdToImage[tileId].image;
				if(tileId == 0 && layerIndex != world.length - 1) {
					tileType = ""; // Water should only be on base layer.
				}
				 Crafty.e('2D, DOM, ' + tileType)
					.attr({x: colIndex * 101, y: rowIndex * 81 + layerIndex * 40, w: 101, h: 171})
			}
		}
	}
}); 